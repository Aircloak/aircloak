{
  "type": "object",
  "properties": {
    "name": {"type": "string", "minLength": 1},
    "driver": {"type": "string", "minLength": 1},
    "parameters": {"$ref": "#/definitions/parameters"},
    "tables": {"type": "object", "patternProperties": {"^.*$": {"$ref": "#/definitions/table"}}},
    "encoded": {"type": "boolean"},
    "statistics_anonymization": {"type": "boolean"},
    "concurrency": {"type": "integer", "minimum": 0},
    "lcf_buckets_aggregation_limit": {"type": "integer", "minimum": 0},
    "max_rare_negative_conditions": {"type": "integer", "minimum": 0},
    "analyst_tables_enabled": {"type": "boolean"},
    "bound_computation_enabled": {"type": "boolean"},
    "load_comments": {"type": "boolean"}
  },
  "additionalProperties": false,
  "required": ["name", "driver", "parameters", "tables"],
  "definitions": {
    "table": {
      "type": "object",
      "properties": {
        "db_name": {"type": "string", "minLength": 1},
        "content_type": {"type": "string", "enum": ["personal", "non-personal"]},
        "keys": {"type": "array", "items": {"type": "object"}},
        "query": {"type": "string", "minLength": 1},
        "auto_isolating_column_classification": {"type": "boolean"},
        "maintain_shadow_db": {"type": "boolean"},
        "isolating_columns": {"type": "object", "patternProperties": {"^.*$": {"type": "boolean"}}},
        "exclude_columns": {"type": "array", "items": {"type": "string"}},
        "unselectable_columns": {"type": "array", "items": {"type": "string"}},
        "comments": {
          "type": "object",
          "properties": {
            "table": {"type": "string"},
            "columns": {"type": "object", "patternProperties": {"^.*$": {"type": "string"}}}
          }
        }
      },
      "additionalProperties": false,
      "anyOf": [
        {"required": ["keys"]},
        {"required": ["content_type"]}
      ]
    },
    "parameters": {
      "type": "object",
      "properties": {
        "hostname": {"type": "string", "minLength": 1},
        "port": {"type": "integer", "minimum": 1},
        "username": {"type": "string", "minLength": 1},
        "database": {"type": "string", "minLength": 1},
        "password": {"type": "string"}
      },
      "additionalProperties": true,
      "required": ["hostname"]
    }
  }
}
