{
  "driver": "postgresql",
  "name": "compliance_encoded",
  "parameters": {
    "hostname": "localhost",
    "username": "datasource_compliance",
    "database": "datasource_compliance"
  },
  "tables": {
    "users": {
      "db_name": "users_encoded",
      "user_id": "id",
      "decoders": [
        {"method": "base64", "columns": ["name"]},
        {"method": "aes_cbc_128", "key": "1234567890ABCDEF", "columns": ["name"]},
        {"method": "text_to_integer", "columns": ["age"]},
        {"method": "text_to_real", "columns": ["height"]},
        {"method": "text_to_boolean", "columns": ["active"]}
      ]
    },
    "notes": {
      "db_name": "notes_encoded",
      "projection": {
        "table": "users",
        "foreign_key": "user_id",
        "primary_key": "id",
        "user_id_alias": "uid"
      },
      "decoders": [
        {"method": "base64", "columns": ["title", "content"]},
        {"method": "aes_cbc_128", "key": "1234567890ABCDEF", "columns": ["title", "content"]}
      ]
    },
    "drafts_changes": {
      "db_name": "drafts_changes_encoded",
      "projection": {
        "table": "notes",
        "foreign_key": "note_id",
        "primary_key": "user_id",
        "user_id_alias": "uid"
      },
      "decoders": [
        {"method": "base64", "columns": ["changes.change"]},
        {"method": "aes_cbc_128", "key": "1234567890ABCDEF", "columns": ["changes.change"]},
        {"method": "text_to_datetime", "columns": ["changes.date"]}
      ]
    },
    "addresses": {
      "db_name": "addresses_encoded",
      "decoders": [
        {"method": "base64", "columns": ["home.city", "home.postal_code", "work.city", "work.postal_code"]},
        {"method": "aes_cbc_128", "key": "1234567890ABCDEF", "columns": ["home.city", "work.city"]},
        {"method": "text_to_integer", "columns": ["home.postal_code", "work.postal_code"]}
      ],
      "projection": {
        "table": "users",
        "foreign_key": "user_id",
        "primary_key": "id",
        "user_id_alias": "uid"
      }
    }
  }
}
