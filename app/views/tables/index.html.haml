%h1 Tables

%hr

- unless @has_tables
  %strong No tables exist yet
- else
  - @clusters.each do |cluster|
    %h2= cluster.name if current_user.has_multiple_clusters?

    %table.table.table-striped
      %thead
        %tr
          %th Name
          %th= help_tooltip "index_table_buttons"
      %tbody
        - if @tables[cluster.id]
          - @tables[cluster.id].each do |table|
            %tr
              %td= table.table_name
              %td
                - if table.pending_migrations?
                  pending migration
                  = link_to 'Retry', retry_migration_table_path(table), method: :post, class: "btn btn-mini"
                - else
                  = link_to 'Edit', edit_table_path(table), class: "btn btn-mini"
                  = link_to 'Drop table', table_path(table), :method => :delete, :data => { :confirm => 'Are you sure?' }, class: "btn btn-mini btn-danger"
        - else
          %tr
            %td{colspan: 2}= "No tables in #{cluster.name} cluster"

= link_to "Create table", new_table_path, class: "btn"
