%h1 Listing queries

%table.table.table-condensed
  %thead
    %tr
      %th Name
      %th Running on behalf of
      %th Index
      %th # Query files
      %th Current executions
      %th
      %th
      %th
  %tbody
  - @queries.each do |query|
    %tr
      %td= query.name
      %td= query.on_behalf_of
      %td= query.index ? query.index.human_name : "unnamed index"
      %td= query.query_files.count
      - if query.update_query then
        %td N/A
        %td
      - else
        %td= query.pending_results.size
        %td= link_to 'Execute batch', execute_as_batch_query_query_path(query), method: "post", class: "btn btn-mini"
      %td= link_to 'Edit', edit_query_path(query), class: "btn btn-mini"
      %td= link_to 'Destroy', query, :method => :delete, :data => { :confirm => 'Are you sure?' }, class: "btn btn-mini btn-danger"

%br

= link_to 'New Query', new_query_path, class: "btn"
