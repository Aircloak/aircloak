-# Passes the cluster -> cloaks mapping to a global page variable
= content_for(:javascript_include) {"<script>window.clusterCloaks=#{@cluster_cloaks}</script>".html_safe}

-# Includes additional, page-specific javascripts
= content_for(:javascript_include) {javascript_include_tag "metrics/controller", "data-turbolinks-track" => true}

%h1 Select metrics
%br
%form{:id => "dashboardParams", :style=>"display:none;"}
  %table{:id => "clusterParams"}
    %thead
      %tr
        %td= "Cluster"
        %td= "Dashboard"
        %td= "Aggregation"
    %tr
      %td= select_tag :cluster, options_from_collection_for_select(@clusters, "name", "name")
      %td= select_tag :dashboard, []
      %td= select_tag :aggregation, []
  %div
    From: #{text_field_tag :from, "-1h", :size => 15, :style => "width:auto;"}
    &nbsp;
    Until: #{text_field_tag :until, "", :size => 15, :style => "width:auto;"}
    &nbsp;
    =check_box_tag("autoRefresh")
    auto refresh
    %br
    %span{:style => "color:#A0A0A0;"} Time examples: 1s, 1min, 1h, 1d, 1w, 1mon, 1y, 12:00_20140131
  %br
  -# submit button makes it possible to triger render on enter
  =submit_tag(value = "Show", :class => "btn", id: "renderGraphs")
  #renderGraphsNewTab.btn Show in new window
%br
%br
#graphs