{
  "type": "object",
  "properties": {
    "auto_aircloak_export": {"type": "boolean"},
    "use_staging_license_key": {"type": "boolean"},

    "database": {
      "type": "object",
      "properties": {
        "host": {"type": "string", "minLength": 1},
        "port": {"type": "integer", "minimum": 1},
        "ssl": {"type": "boolean"},
        "user": {"type": "string", "minLength": 1},
        "password": {"type": "string"},
        "name": {"type": "string", "minLength": 1}
      },
      "additionalProperties": false,
      "required": ["host", "user", "name"]
    },

    "shadow_database": {
      "type": "object",
      "properties": {
        "host": {"type": "string", "minLength": 1},
        "port": {"type": "integer", "minimum": 1},
        "ssl": {"type": "boolean"},
        "user": {"type": "string", "minLength": 1},
        "password": {"type": "string"},
        "name": {"type": "string", "minLength": 1}
      },
      "additionalProperties": false,
      "required": ["host", "user", "name"]
    },

    "site": {
      "type": "object",
      "properties": {
        "auth_secret": {"type": "string", "minLength": 60},
        "endpoint_key_base": {"type": "string", "minLength": 60},
        "api_token_salt": {"type": "string", "$comment": "allowed for backward compatibility"},
        "master_password": {"type": "string", "minLength": 1},
        "certfile": {"type": "string"},
        "keyfile": {"type": "string"},
        "use_staging_license_key": {"type": "boolean"},
        "customer_token": {"type": "string", "minLength": 1, "$comment": "allowed for backward compatibility"},
        "alternate_aircloak_central": {"type": "string", "$comment": "used to connect to stage central"},
        "license_file": {"type": "string", "$comment": "path to license file in mount"},
        "privacy_policy_file": {"type": "string", "$comment": "path to privacy policy content"}
      },
      "additionalProperties": false,
      "required": ["auth_secret", "endpoint_key_base", "master_password"]
    },

    "psql_server": {
      "type": "object",
      "properties": {
        "require_ssl": {"type": "boolean"},
        "certfile": {"type": "string", "minLength": 1},
        "keyfile": {"type": "string", "minLength": 1}
      },
      "additionalProperties": false,
      "required": ["require_ssl"]
    },

    "appsignal": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "push_api_key": {"type": "string"},
        "env": {"type": "string"},
        "http_proxy": {"type": "string"},
        "active": {"type": "string"},
        "ca_file_path": {"type": "string"},
        "debug": {"type": "string"},
        "dns_servers": {"type": "string"},
        "enable_host_metrics": {"type": "string"},
        "files_world_accessible": {"type": "string"},
        "filter_parameters": {"type": "string"},
        "filter_session_data": {"type": "string"},
        "hostname": {"type": "string"},
        "ignore_actions": {"type": "string"},
        "ignore_errors": {"type": "string"},
        "ignore_namespaces": {"type": "string"},
        "log": {"type": "string"},
        "log_path": {"type": "string"},
        "endpoint": {"type": "string"},
        "request_headers": {"type": "string"},
        "running_in_container": {"type": "string"},
        "working_dir_path": {"type": "string"},
        "revision": {"type": "string"}
      },
      "additionalProperties": false,
      "required": ["name", "push_api_key", "env"]
    },

    "ldap": {
      "type": "object",
      "properties": {
        "host": {"type": "string"},
        "port": {"type": "number"},
        "bind_dn": {"type": "string"},
        "password": {"type": "string"},
        "encryption": {"type": "string", "enum": ["plain", "ssl", "start_tls"]},
        "verify_server_certificate": {"type": "boolean"},
        "ca_certfile": {"type": "string", "minLength": 1},
        "client_certfile": {"type": "string", "minLength": 1},
        "client_keyfile": {"type": "string", "minLength": 1},
        "user_base": {"type": "string", "minLength": 1},
        "user_name": {"type": "string", "minLength": 1},
        "user_login": {"type": "string", "minLength": 1},
        "user_filter": {"type": "string", "minLength": 1},
        "group_base": {"type": "string", "minLength": 1},
        "group_filter": {"type": "string", "minLength": 1},
        "group_name": {"type": "string", "minLength": 1},
        "group_member": {"type": "string", "minLength": 1},
        "group_member_key": {"type": "string", "enum": ["login", "dn"]},
        "user_group": {"type": "string", "minLength": 1}
      },
      "additionalProperties": false,
      "required": ["host", "user_base", "group_base"]
    }
  },
  "additionalProperties": false,
  "required": ["database", "site"]
}
