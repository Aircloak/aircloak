// Ports used in the air system.
// The port used by a particular service in a particular environment is calculated as:
//   environment_offset + service_offset
{
  // Base ports used in various environments.
  "environment_offsets": {
    "dev": 20000,
    "prod": 20100,
    "test": 20200
  },

  // Port offsets for each service
  "service_offsets": {
    ////////////////////////////////////////////////////////////////////////////
    // Ports 0-19 are reserved for the services which developers use directly,
    // for example from browsers or some other client apps (e.g. database client tool).
    // If you're introducing such service, please add it to this range.
    // The reason for this rule is developer's convenience. Keeping frequently used
    // ports together, makes it easier for us to remember them.

    "balancer/https": 0,
    "router/https": 1,

    // Note: database is used only in the development env on local development machines.
    // In production, the database server is running on a dedicated host and listens on
    // the standard port (5432).
    "database/tcp": 2,


    ////////////////////////////////////////////////////////////////////////////
    // Internal endpoints, which are used only by other services in the system.

    "etcd/client": 20,
    "etcd/peer": 21,
    "balancer/http": 22,
    "router/http": 23,
    "air_frontend/http": 24,
    "air_backend/epmd": 25,
    "registry/http": 26,
    "insights/http": 27,

    // Ports 30-34 are reserved for HTTP of the backend node.
    // Ports 35-39 are reserved for inet_dist of the backend node.
    // We use multiple ports to support multiple instances on the same machine.
    "air_backend/http": 30,
    "air_backend/inet_dist_listen_min": 35,
    "air_backend/inet_dist_listen_max": 39,

    // Ports 40-44 are reserved for airpub HTTP of the backend node.
    "airpub/http": 40,

    // We use proxy protocol to listen on these ports. This allows us to use
    // haproxy balancer and forward IP addresses of clients.
    "router/proxy_https": 45,
    "router/proxy_http": 46
  }
}
