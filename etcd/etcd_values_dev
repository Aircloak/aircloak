# This is a sample file with values that should
# be stored in etcd when running the rails app
# with docker locally.
#
# To use it, please set the values appropriately,
# and rename it to etcd_values.
#
# It is ignored by git, so you can change values
# at will without leaking local state.
#
# The only primitive supported is:
#
#   etcd_set <path> <value>

GATEWAY="127.0.0.1"

etcd_set /settings/mail/smtp/address smtp.mandrillapp.com
etcd_set /settings/mail/smtp/port 587
etcd_set /settings/mail/smtp/username "sebastian@aircloak.com"
etcd_set /settings/mail/smtp/password "_EFioVwohF4p6bHBbdaAGw" # This is a valid mandrill test key. API works, but no emails sent
etcd_set /settings/mail/smtp/domain "aircloak.com"

# The database settings are set once when the app launches
# and cannot be changed without relaunching the container.
etcd_set /settings/air/db/host ${GATEWAY}
etcd_set /settings/air/db/port 5433
etcd_set /settings/air/db/username air
etcd_set /settings/air/db/password ''
etcd_set /settings/air/db/database aircloakdatabase
etcd_set /settings/air/db/ssl false

# Integration test settings
# Each row we upload is 504 bytes of data.
# With a total of roughly 10000 uploaded rows, our test
# dataset for local development is 5MB
etcd_set /settings/air/integration_test/cluster_size 1
etcd_set /settings/air/integration_test/data/num_users 100
etcd_set /settings/air/integration_test/data/mean_rows_per_user 100

# Whether it is a global installation, or whether it should
# ignore costly operations involving infrastructure.
# false is a good choice for local development.
etcd_set /settings/rails/global false

etcd_set /settings/rails/task/return_protocol http
etcd_set /settings/rails/task/return_host localhost
etcd_set /settings/rails/task/return_port 3000
etcd_set /settings/rails/task/publish_url http://${GATEWAY}:1080/publish

etcd_set /settings/rails/secrets/private_key_password "a not so secret key"
etcd_set /settings/rails/secrets/github_oauth_token "7514ff11de609919ab6dadb2f43724cec10df436"
etcd_set /settings/rails/secrets/secret_key_base "random-secret"
etcd_set /settings/rails/secrets/ca_path "../router/dev_cert"

# External services
etcd_set /service/frontend_local http://frontend.air-local:8203
etcd_set /service/backend_local http://backend.air-local:8203
etcd_set /service/airpub/shared_secret "well-known secret"
etcd_set /service/airpub/subscribe_endpoint "ws://${GATEWAY}:1080/subscribe/ws"
etcd_set /service/build_server/host localhost
etcd_set /service/cloak/port 8098
etcd_set /service/cloak/protocol http
etcd_set /service/manny_air/host localhost
